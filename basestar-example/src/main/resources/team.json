{
  "types": {
    "Team": {
      "properties": {
        "owner": {
          "type": {
            "ref": "User"
          }
        }
      },
      "links": {
        "allMemberships": {
          "type": "TeamMember",
          "query": "team.id == this.id"
        },
        "activeMemberships": {
          "type": "TeamMember",
          "query": "team.id == this.id"
        },
        "projects": {
          "type": "TeamProject",
          "query": "team.id == this.id"
        }
      },
//      "queries": {
//        "members": {
//          "type": "Team.Member",
//          "query": {
//            "eq": {
//              "team.id": "this.id"
//            }
//          }
//        },
//        "activeMembers": {
//          "type": "Team.Member",
//          "query": {
//            "eq": {
//              "team.id": "this.id",
//              "status": "ACTIVE"
//            }
//          }
//        }
//      },
      "indexes": {
        "owner": {
          "partition": [
            "owner.id"
          ]
        }
      },
      "permissions": {
        "create": {
          "expression": "request.owner.id == caller.id"
        },
        "update": {
          "expression": "current.owner.id == caller.id"
        }
      }
    },
    "TeamMemberStatus": {
      "type": "enum",
      "values": [
        "INVITED",
        "ACCEPTED"
      ]
    },
    "TeamMember": {
      "properties": {
        "team": {
          "type": {
            "ref": "Team"
          }
        },
        "user": {
          "type": {
            "ref": "User"
          }
        },
        "status": {
          "type": "TeamMemberStatus"
        }
      },
      "indexes": {
        "team": {
          "partition": [
            "team.id"
          ],
          "sort": [
            "user.id"
          ]
        },
        "user": {
          "partition": [
            "user.id"
          ],
          "sort": [
            "team.id"
          ]
        }
      }
//      "permissions": {
//        "create": {
//          "expression": "request.team.owner.id == caller.id",
//          "expand": [
//            "request.team"
//          ]
//        },
//        "update": {
//          "expression": "this.user.id == caller.id || this.team.owner.id == caller.id",
//          "expand": [
//            "this.team"
//          ]
//        },
//        "delete": {
//          "expression": "false"
//        }
//      }
    }
  }
}